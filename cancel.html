<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Order Success || Gilbard</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="assets/images/favicon.ico" type="img/x-icon" rel="shortcut icon">
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Nova+Round&amp;family=Saira+Stencil+One&amp;family=Ubuntu:wght@300;400;500;700&amp;display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/icofont.min.css">
    <link rel="stylesheet" href="assets/css/plugins.css">
    <link rel="stylesheet" href="assets/css/helper.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>

    <div id="main-wrapper">

        <!--Header section start-->
        <header class="header header-static bg-black header-sticky">
            <div class="default-header menu-right">
                <div class="container container-1520">
                    <div class="row">

                        <!--Logo start-->
                        <div class="col-12 col-md-3 col-lg-3 order-md-1 order-lg-1 mt-20 mb-20">
                            <div class="logo">
                                <a href="index.html"><img src="assets/images/logo.png" alt=""></a>
                            </div>
                        </div>
                        <!--Logo end-->

                        <!--Menu start-->
                        <div class="col-lg-6 col-12 order-md-3 order-lg-2 d-flex justify-content-center">
                            <nav class="main-menu menu-style-2">
                                <ul>
                                    <li><a href="index.html">Home</a>
                                        <ul class="sub-menu">
                                            <li><a href="index.html">Home One</a></li>
                                            <li><a href="index-2.html">Home Two</a></li>
                                            <li><a href="index-3.html">Home Three</a></li>
                                            <li><a href="index-4.html">Home Four</a></li>
                                            <li><a href="index-5.html">Home Five</a></li>
                                            <li><a href="index-6.html">Home Six</a></li>
                                            <li><a href="index-landing.html">Home Landing</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="games.html">Games</a>
                                        <ul class="sub-menu">
                                            <li><a href="games.html">Games</a></li>
                                            <li><a href="games-details.html">Games Details</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="video.html">Videos</a></li>
                                    <li><a href="forum.html">Forums</a>
                                        <ul class="sub-menu">
                                            <li><a href="forum.html">Forums</a></li>
                                            <li><a href="forum-create.html">Forums Create</a></li>
                                            <li><a href="forum-post.html">Forums Post</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="#">Pages</a>
                                        <ul class="sub-menu">
                                            <li><a href="blog.html">Blog</a></li>
                                            <li><a href="blog-left-sidebar.html">Blog Left Sidebar</a></li>
                                            <li><a href="blog-right-sidebar.html">Blog Right Sidebar</a></li>
                                            <li><a href="blog-list.html">Blog List</a></li>
                                            <li><a href="blog-list-left-sidebar.html">Blog List Left Sidebar</a></li>
                                            <li><a href="single-blog.html">Single Blog</a></li>
                                            <li><a href="single-blog-left.html">Single Blog Left Sidebar</a></li>
                                            <li><a href="gallery.html">Gallery</a></li>
                                            <li><a href="checkout.html">Checkout</a></li>
                                            <li><a href="login.html">Login</a></li>
                                            <li><a href="register.html">Register</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="contact.html">Contact</a></li>
                                </ul>
                            </nav>
                        </div>
                        <!--Menu end-->

                        <!--Header Right Wrap-->
                        <div class="col-12 col-md-9 order-md-2 order-lg-3 col-lg-3">
                            <div class="header-right-wrap">
                                <ul>
                                    <li class="show-logged-out"><a href="login.html">Login</a></li>
                                    <li class="show-logged-out"><a href="register.html">Register</a></li>
                                    <li class="show-logged-in"><a href="profile.html">Profile</a></li>
                                    <li class="show-logged-in"><a href="#" id="logout">Logout</a></li>
                                    <li class="header-search"><a class="header-search-toggle" href="#"><i
                                                class="icofont-search-2"></i></a>
                                        <div class="header-search-form">
                                            <form action="#">
                                                <input type="text" placeholder="Type and hit enter">
                                                <button><i class="icofont-search"></i></button>
                                            </form>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!--Header Right Wrap-->

                    </div>

                    <!--Mobile Menu start-->
                    <div class="row">
                        <div class="col-12 d-flex d-lg-none">
                            <div class="mobile-menu"></div>
                        </div>
                    </div>
                    <!--Mobile Menu end-->

                </div>
            </div>
        </header>
        <!--Header section end-->

        <!--Page Banner Area Start-->
        <div class="page-banner-2" style="background-image: url(assets/images/bg/page-bg.jpg)">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <!--Hero Content start-->
                        <div class="page-content-2">
                            <h1>Order Failed</h1>
                            <h3>Redirecting to your profile....</h3>
                        </div>
                        <!--Hero Content end-->
                    </div>
                </div>
            </div>
        </div>
        <!--Page Banner Area End-->

        <!--Projects section start-->
        <div class="newslatter-section newslatter-section-tow section pt-lg-0 pt-sm-0 pb-xs-50">
            <div class="container">

                <div class="row">
                    <div class="col-12">
                        <!--News Latter Area Start-->
                        <div class="news-latter-area newslatter-black">
                            <div class="news-latter-box">
                                <h3>SUBSCRIBE OUR NEWSLETTER, GET ALL <br> LATEST NEWS, UPDATE, VIDEOS AND OFFERS </h3>
                                <form action="#">
                                    <input type="text" placeholder="Enter your email here">
                                </form>
                            </div>
                        </div>
                        <!--News Latter Area End-->
                    </div>
                </div>

            </div>

        </div>
        <!--Projects section end-->

        <!--Footer section start-->
        <footer class="footer-section style-2 section bg-theme"
            style="background-image: url(assets/images/bg/footer-bg.jpg)">

            <!--Footer Top start-->
            <div
                class="footer-top section pt-175 pt-lg-150 pt-md-125 pt-sm-110 pt-xs-40 pb-80 pb-lg-70 pb-md-60 pb-sm-15 pb-xs-40">
                <div class="container container-1520">
                    <div class="row justify-content-lg-between">

                        <!--Footer Widget start-->
                        <div class="col-xl-3 col-lg-2 col-md-3">
                            <div class="footer-widget">
                                <div class="footer-logo">
                                    <a href="index.html"><img src="assets/images/logo.png" alt=""></a>
                                </div>
                            </div>
                        </div>
                        <!--Footer Widget end-->

                        <!--Footer Widget start-->
                        <div class="col-xl-6 col-lg-6 col-md-9">
                            <div class="footer-widget">
                                <div class="footer-nav">
                                    <nav>
                                        <ul>
                                            <li><a href="#">forums</a></li>
                                            <li><a href="#">games</a></li>
                                            <li><a href="#">blogs</a></li>
                                            <li><a href="#">videos</a></li>
                                            <li><a href="#">contact us</a></li>
                                            <li><a href="#">about us</a></li>
                                            <li><a href="#">terms of use</a></li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                        <!--Footer Widget end-->

                        <!--Footer Widget start-->
                        <div class="col-xl-3 col-lg-4 col-md-4">
                            <div class="footer-widget">
                                <div class="footer-social">
                                    <h4>Follow us:</h4>
                                    <div class="footer-social-icon">
                                        <a class="facebook" href="https://www.facebook.com/"><i
                                                class="icofont-facebook"></i></a>
                                        <a class="twitter" href="https://www.twitter.com/"><i
                                                class="icofont-twitter"></i></a>
                                        <a class="linkedin" href="https://www.linkedin.com/"><i
                                                class="icofont-linkedin"></i></a>
                                        <a class="pinterest" href="https://www.pinterest.com/"><i
                                                class="icofont-pinterest"></i></a>
                                        <a class="google-plus" href="https://plus.google.com/"><i
                                                class="icofont-google-plus"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Footer Widget end-->

                    </div>
                </div>
            </div>
            <!--Footer Top end-->

            <!--Footer Bottom start-->
            <div class="footer-bottom section text-center">
                <div class="container container-1520">
                    <div class="row">
                        <div class="col-12">
                            <div class="footer-bottom-text">
                                <p>All Rights Reserved by &copy; Gilbard 2020</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Footer Bottom end-->

        </footer>
        <!--Footer section end-->

    </div>

    <script>

        function getToken() {
            // Function to get the token from the cookie
            const name = "session_token=";
            const decodedCookie = decodeURIComponent(document.cookie);
            const ca = decodedCookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) === 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        const token = getToken();

        // Extract order ID from session cookie
        function getOrderIDFromCookie() {
            return localStorage.getItem('orderId');;
        }

        // Fetch order details from API
        async function fetchOrderDetails(orderId) {
            try {
                const response = await fetch(`http://ec2-3-29-2-252.me-central-1.compute.amazonaws.com:5000/api/order/cancel/${orderId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    }
                });
                if (response.ok) {
                    const data = await response.json();
                    return data;
                } else {
                    throw new Error('Failed to fetch order details');
                }
            } catch (error) {
                console.error('Error:', error);
                return null;
            }
        }


        // Redirect to profile after delay
        function redirectToProfile() {
            setTimeout(() => {
                window.location.href = 'profile.html';
            }, 5000);
        }

        // Main function to run on page load
        async function main() {
            const orderId = getOrderIDFromCookie();
            console.log(orderId)
            if (orderId) {
                const details = await fetchOrderDetails(orderId);
                console.log(details)
                redirectToProfile();
            } else {
                displayOrderDetails(null);
            }
        }

        // Run main function on page load
        window.onload = main;
    </script>

</body>

</html>